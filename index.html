<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>ReChat AI | Final</title>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; text-align: center; padding: 20px; }
        .btn-rosa { background: linear-gradient(45deg, #f09433, #e95950, #bc1888); color: white; border: none; padding: 15px 30px; border-radius: 50px; cursor: pointer; font-weight: bold; margin-bottom: 20px; }
        #contenedor { display: none; text-align: left; max-width: 600px; margin: 0 auto; background: #111; padding: 15px; border-radius: 15px; border: 1px solid #333; }
        .bubble { margin-bottom: 10px; padding: 10px; border-radius: 10px; background: #222; border-left: 4px solid #bc1888; }
        .user { font-size: 12px; color: #bc1888; font-weight: bold; }
        pre { color: #0f0; background: #000; padding: 10px; overflow: auto; font-size: 12px; }
    </style>
</head>
<body>
    <h1>ReChat AI</h1>
    <input type="file" id="archivo" style="display:none">
    <button class="btn-rosa" onclick="document.getElementById('archivo').click()">CARGAR CHAT</button>
    <div id="contenedor"></div>

<script>
    document.getElementById('archivo').onchange = function(e) {
        const reader = new FileReader();
        const visor = document.getElementById('contenedor');
        
        reader.onload = function(ev) {
            visor.style.display = 'block';
            const texto = ev.target.result;
            try {
                const data = JSON.parse(texto);
                const msgs = data.messages || data;
                visor.innerHTML = <p style="text-align:center">${msgs.length} mensajes encontrados</p>;
                
                msgs.slice(-200).forEach(m => {
                    visor.innerHTML += `
                        <div class="bubble">
                            <div class="user">${m.sender_name}</div>
                            <div>${m.content || "[Multimedia]"}</div>
                        </div>`;
                });
            } catch(err) {
                // Si el diseño falla, volvemos a lo que funcionó en image_a52f25.jpg
                visor.innerHTML = <h3>Modo de Emergencia Activo</h3><pre>${texto.substring(0, 5000)}</pre>;
            }
        };
        reader.readAsText(e.target.files[0]);
    };
</script>
</body>
</html>
