<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>ReChat AI | Mi Conversación</title>
    <style>
        body { background: #0e0e0e; color: #fff; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .container { max-width: 500px; width: 100%; }
        .header { text-align: center; padding: 20px; background: linear-gradient(45deg, #f09433, #e95950, #bc1888, #4f5bd5); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-size: 32px; font-weight: bold; }
        .btn-cargar { background: linear-gradient(45deg, #f09433, #e95950, #bc1888); color: white; border: none; padding: 15px 30px; border-radius: 25px; cursor: pointer; font-size: 16px; font-weight: bold; width: 100%; box-shadow: 0 4px 15px rgba(188, 24, 136, 0.4); margin-bottom: 20px; }
        #chat-area { display: none; width: 100%; background: #1a1a1a; border-radius: 20px; padding: 15px; box-sizing: border-box; border: 1px solid #333; }
        .mensaje { margin-bottom: 15px; padding: 12px; border-radius: 15px; position: relative; line-height: 1.4; }
        .basti { background: #333; border-bottom-left-radius: 2px; align-self: flex-start; border-left: 4px solid #4f5bd5; }
        .versaires { background: #bc188822; border-bottom-right-radius: 2px; align-self: flex-end; border-right: 4px solid #bc1888; }
        .nombre { font-size: 12px; font-weight: bold; margin-bottom: 4px; color: #aaa; text-transform: uppercase; }
        .contenido { font-size: 15px; color: #eee; }
    </style>
</head>
<body>

    <div class="container">
        <div class="header">ReChat AI</div>
        <p style="text-align:center; color:#888;">Visualizador de Mensajes Optimizado</p>
        
        <input type="file" id="archivo" style="display:none">
        <button class="btn-cargar" onclick="document.getElementById('archivo').click()">SELECCIONAR CHAT_FINAL.JSON</button>

        <div id="chat-area"></div>
    </div>

    <script>
        document.getElementById('archivo').onchange = function(e) {
            const reader = new FileReader();
            reader.onload = function(ev) {
                try {
                    const data = JSON.parse(ev.target.result);
                    const msgs = data.messages || data;
                    const area = document.getElementById('chat-area');
                    area.style.display = 'block';
                    
                    area.innerHTML = <div style="text-align:center; color:#555; margin-bottom:20px;">Mostrando últimos 300 mensajes de ${msgs.length}</div>;
                    
                    msgs.slice(-300).forEach(m => {
                        const clase = m.sender_name.toLowerCase().includes('basti') ? 'basti' : 'versaires';
                        area.innerHTML += `
                            <div class="mensaje ${clase}">
                                <div class="nombre">${m.sender_name}</div>
                                <div class="contenido">${m.content || "<small style='color:#666'>[Multimedia / Audio]</small>"}</div>
                            </div>
                        `;
                    });
                } catch(err) {
                    alert("Error al procesar el diseño. El archivo tiene un formato no compatible.");
                }
            };
            reader.readAsText(e.target.files[0]);
        };
    </script>
</body>
</html>
